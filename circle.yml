general:
  branches:
    ignore:
      - master
      - gh-pages
      - /deploy-.*/

machine:
  timezone:
    America/Los_Angeles
  node:
    version: 6.3.0
  ruby:
    version: 2.3.1

dependencies:
  cache_directories:
    - .deploy
  pre:
    - 'echo ''gem: --no-document'' > ~/.gemrc'

test:
  override:
    - bundle exec rake circleci

deployment:
  production:
    branch: production
    commands:
      - npm run deploy
  staging:
    branch:
      - staging
      - development
    commands:
      - npm run deploy:staging
